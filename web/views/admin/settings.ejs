<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì‹œìŠ¤í…œ ì„¤ì •</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/admin.css">
  <style>
    .settings-container {
      padding: 20px;
      max-width: 1000px;
      margin: 0 auto;
    }

    .settings-section {
      background: var(--search-bg);
      border: 1px solid var(--input-border);
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .settings-section h2 {
      margin-top: 0;
      color: var(--text-color);
      border-bottom: 2px solid var(--input-border);
      padding-bottom: 10px;
    }

    .setting-row {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 20px;
      margin: 15px 0;
      padding: 15px 0;
      border-bottom: 1px solid var(--input-border);
    }

    .setting-row:last-child {
      border-bottom: none;
    }

    .setting-label {
      font-weight: bold;
      color: var(--text-color);
      display: flex;
      flex-direction: column;
    }

    .setting-label small {
      font-weight: normal;
      color: #888;
      margin-top: 5px;
    }

    .setting-control input[type="text"],
    .setting-control input[type="number"],
    .setting-control input[type="email"],
    .setting-control select,
    .setting-control textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid var(--input-border);
      border-radius: 4px;
      background: var(--bg-color);
      color: var(--text-color);
    }

    .setting-control textarea {
      min-height: 80px;
      resize: vertical;
    }

    .setting-control input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }

    .btn-save {
      background-color: #4caf50;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin-right: 10px;
    }

    .btn-save:hover {
      background-color: #45a049;
    }

    .btn-reset {
      background-color: #f44336;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }

    .btn-reset:hover {
      background-color: #da190b;
    }

    .action-buttons {
      text-align: right;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid var(--input-border);
    }

    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 5px;
    }

    .status-indicator.online {
      background-color: #4caf50;
    }

    .status-indicator.offline {
      background-color: #f44336;
    }
  </style>
</head>

<body>
  <%- include('nav.ejs') %>
  <div class="settings-container">
    <h1>âš™ï¸ ì‹œìŠ¤í…œ ì„¤ì •</h1>
    
    <section>
      <% if (!user) { %>
      <p>Welcome! Please <a href="/login">log in</a>.</p>
      <% } else { %>
      <p>Hello, <%= user.username %>. <a href="/logout">logout</a>. <a href="/profile">profile</a>.</p>
      <% } %>
    </section>

    <div class="settings-section">
      <h2>ì¼ë°˜ ì„¤ì •</h2>
      <div class="setting-row">
        <div class="setting-label">
          <span>ì‚¬ì´íŠ¸ ì œëª©</span>
          <small>ë¸Œë¼ìš°ì € íƒ­ì— í‘œì‹œë˜ëŠ” ì œëª©</small>
        </div>
        <div class="setting-control">
          <input type="text" id="siteTitle" value="ODevTube Admin">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>ì‚¬ì´íŠ¸ ì„¤ëª…</span>
          <small>ê²€ìƒ‰ ì—”ì§„ì— í‘œì‹œë  ì„¤ëª…</small>
        </div>
        <div class="setting-control">
          <textarea id="siteDescription">ê°œë°œìë¥¼ ìœ„í•œ ë¹„ë””ì˜¤ í”Œë«í¼</textarea>
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>í˜ì´ì§€ë‹¹ í•­ëª© ìˆ˜</span>
          <small>ëª©ë¡ì— í‘œì‹œí•  í•­ëª© ê°œìˆ˜</small>
        </div>
        <div class="setting-control">
          <input type="number" id="itemsPerPage" value="60" min="10" max="100">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>íƒ€ì„ì¡´</span>
          <small>ì‹œìŠ¤í…œ ì‹œê°„ëŒ€ ì„¤ì •</small>
        </div>
        <div class="setting-control">
          <select id="timezone">
            <option value="Asia/Seoul" selected>í•œêµ­ (UTC+9)</option>
            <option value="America/New_York">ë‰´ìš• (UTC-5)</option>
            <option value="Europe/London">ëŸ°ë˜ (UTC+0)</option>
            <option value="Asia/Tokyo">ë„ì¿„ (UTC+9)</option>
          </select>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <h2>ì´ë©”ì¼ ì„¤ì •</h2>
      <div class="setting-row">
        <div class="setting-label">
          <span>SMTP ì„œë²„</span>
          <small>ì´ë©”ì¼ ë°œì†¡ ì„œë²„ ì£¼ì†Œ</small>
        </div>
        <div class="setting-control">
          <input type="text" id="smtpServer" value="smtp.gmail.com">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>SMTP í¬íŠ¸</span>
          <small>ì„œë²„ í¬íŠ¸ ë²ˆí˜¸</small>
        </div>
        <div class="setting-control">
          <input type="number" id="smtpPort" value="587">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>ë°œì‹ ì ì´ë©”ì¼</span>
          <small>ì‹œìŠ¤í…œì—ì„œ ë°œì†¡í•˜ëŠ” ì´ë©”ì¼ ì£¼ì†Œ</small>
        </div>
        <div class="setting-control">
          <input type="email" id="senderEmail" value="noreply@odevtube.com">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>ì´ë©”ì¼ ì•Œë¦¼</span>
          <small>ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ ì´ë©”ì¼ ì•Œë¦¼</small>
        </div>
        <div class="setting-control">
          <input type="checkbox" id="emailNotifications" checked>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <h2>API ì„¤ì •</h2>
      <div class="setting-row">
        <div class="setting-label">
          <span>YouTube API í‚¤</span>
          <small>YouTube ë°ì´í„° API v3 í‚¤</small>
        </div>
        <div class="setting-control">
          <input type="text" id="youtubeApiKey" value="<%= process.env.YOUTUBE_API_KEY || '' %>">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>API ìš”ì²­ ì œí•œ</span>
          <small>ë¶„ë‹¹ ìµœëŒ€ ìš”ì²­ ìˆ˜</small>
        </div>
        <div class="setting-control">
          <input type="number" id="apiRateLimit" value="100" min="10" max="1000">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>API ìƒíƒœ</span>
          <small>í˜„ì¬ API ì„œë¹„ìŠ¤ ìƒíƒœ</small>
        </div>
        <div class="setting-control">
          <span class="status-indicator online"></span>
          <span>ì •ìƒ ì‘ë™ ì¤‘</span>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <h2>í¬ë¡  ì‘ì—… ì„¤ì •</h2>
      <div class="setting-row">
        <div class="setting-label">
          <span>ìë™ ì—…ë°ì´íŠ¸</span>
          <small>ë¹„ë””ì˜¤ ìë™ ì—…ë°ì´íŠ¸ í™œì„±í™”</small>
        </div>
        <div class="setting-control">
          <input type="checkbox" id="autoUpdate" checked>
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>ì—…ë°ì´íŠ¸ ì£¼ê¸°</span>
          <small>í¬ë¡  ì‘ì—… ì‹¤í–‰ ê°„ê²© (ì‹œê°„)</small>
        </div>
        <div class="setting-control">
          <input type="number" id="updateInterval" value="1" min="1" max="24">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…</span>
          <small>ìë™ ë°±ì—… í™œì„±í™”</small>
        </div>
        <div class="setting-control">
          <input type="checkbox" id="autoBackup" checked>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <h2>ì„±ëŠ¥ ì„¤ì •</h2>
      <div class="setting-row">
        <div class="setting-label">
          <span>ìºì‹œ í™œì„±í™”</span>
          <small>ì‘ë‹µ ì†ë„ í–¥ìƒì„ ìœ„í•œ ìºì‹±</small>
        </div>
        <div class="setting-control">
          <input type="checkbox" id="enableCache" checked>
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>ìºì‹œ ìœ íš¨ ì‹œê°„</span>
          <small>ìºì‹œ ë§Œë£Œ ì‹œê°„ (ì´ˆ)</small>
        </div>
        <div class="setting-control">
          <input type="number" id="cacheExpiry" value="3600" min="60" max="86400">
        </div>
      </div>

      <div class="setting-row">
        <div class="setting-label">
          <span>ì••ì¶• í™œì„±í™”</span>
          <small>gzip ì••ì¶•ìœ¼ë¡œ ì „ì†¡ëŸ‰ ê°ì†Œ</small>
        </div>
        <div class="setting-control">
          <input type="checkbox" id="enableCompression" checked>
        </div>
      </div>
    </div>

    <div class="action-buttons">
      <button class="btn-save" onclick="saveSettings()">ğŸ’¾ ì„¤ì • ì €ì¥</button>
      <button class="btn-reset" onclick="resetSettings()">ğŸ”„ ì´ˆê¸°í™”</button>
    </div>
  </div>

  <script src="/js/admin.js"></script>
  <script>
    function saveSettings() {
      const settings = {
        siteTitle: document.getElementById('siteTitle').value,
        siteDescription: document.getElementById('siteDescription').value,
        itemsPerPage: document.getElementById('itemsPerPage').value,
        timezone: document.getElementById('timezone').value,
        smtpServer: document.getElementById('smtpServer').value,
        smtpPort: document.getElementById('smtpPort').value,
        senderEmail: document.getElementById('senderEmail').value,
        emailNotifications: document.getElementById('emailNotifications').checked,
        youtubeApiKey: document.getElementById('youtubeApiKey').value,
        apiRateLimit: document.getElementById('apiRateLimit').value,
        autoUpdate: document.getElementById('autoUpdate').checked,
        updateInterval: document.getElementById('updateInterval').value,
        autoBackup: document.getElementById('autoBackup').checked,
        enableCache: document.getElementById('enableCache').checked,
        cacheExpiry: document.getElementById('cacheExpiry').value,
        enableCompression: document.getElementById('enableCompression').checked,
      };
      
      console.log('Settings to save:', settings);
      alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
      
      // ì‹¤ì œ êµ¬í˜„ ì‹œ API í˜¸ì¶œ
      // fetch('/api/settings', { method: 'POST', body: JSON.stringify(settings) })
    }

    function resetSettings() {
      if (confirm('ëª¨ë“  ì„¤ì •ì„ ì´ˆê¸°ê°’ìœ¼ë¡œ ë˜ëŒë¦¬ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        alert('ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        location.reload();
      }
    }
  </script>
</body>

</html>
