<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Profile</title>
  <link rel="stylesheet" href="/css/profile.css">
</head>

<body>
  <button type="button" class="theme-toggle" onclick="toggleTheme(); return false;">ğŸŒ“ ì‹œìŠ¤í…œ</button>
  <div class="profile-container">
    <h1>User Profile</h1>
    <div class="profile-info">
      <p>ID: <%= user.id %></p>
      <p>Username: <%= user.username %></p>
      <p>Name: <%= user.displayName %></p>
      <% if (user.emails) { %>
      <p>Email: <%= user.emails[0].value %></p>
      <% } %>
    </div>
    <a href="/logout" class="logout-link">Log Out</a>
    <a href="/" class="logout-link" style="margin-left: 10px;">Home</a>
    <a href="/admin" class="logout-link" style="margin-left: 10px;">Admin</a>
  </div>

  <script>
    // í…Œë§ˆ ê´€ë¦¬ í•¨ìˆ˜
    function toggleTheme() {
      const currentTheme = localStorage.getItem('theme') || 'light'
      let newTheme
      
      if (currentTheme === 'light') {
        newTheme = 'dark'
      } else {
        newTheme = 'light'
      }
      
      localStorage.setItem('theme', newTheme)
      applyTheme(newTheme)
      updateThemeButton(newTheme)
    }

    function applyTheme(theme) {
      if (theme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light')
      } else {
        // dark
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches
        document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light')
      }
    }

    function updateThemeButton(theme) {
      const button = document.querySelector('.theme-toggle')
      if (button) {
        if (theme === 'light') {
          button.textContent = 'â˜€ï¸ ë¼ì´íŠ¸'
        } else {
          button.textContent = 'ğŸŒ™ ë‹¤í¬'
        }
      }
    }

    function loadTheme() {
      const savedTheme = localStorage.getItem('theme') || 'light'
      applyTheme(savedTheme)
      updateThemeButton(savedTheme)
      
      // ì‹œìŠ¤í…œ í…Œë§ˆ ë³€ê²½ ê°ì§€
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
        const currentTheme = localStorage.getItem('theme') || 'light'
        if (currentTheme === 'light') {
          applyTheme('light')
        }
      })
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ í…Œë§ˆ ì ìš©
    loadTheme()
  </script>
</body>

</html>
